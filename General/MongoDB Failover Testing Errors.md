
**Endpoints:** Initiate Conversation, Get Next Translation, Answer Translation

**Response Times:**

<ac:image ac:height="231"><ri:attachment ri:filename="image2019-7-10_13-50-47.png"><ri:page ri:space-key="~pvarga" ri:content-title="MongoDB Failover Testing Errors"></ri:page></ri:attachment></ac:image>

During FailÂ  over and restore process we found below errors in splunk

202069 Environment=beta Level=error (July 9, Time: 3:00pm - 4:45pm)


| <br> |
| --- |
| Message="(5843960060165976) Error occured requesting: MongoDB.Driver.MongoConnectionException: An exception occurred while receiving a message from the server. ---&gt; System.IO.EndOfStreamException: Attempted to read past the end of the stream.<br><br>at MongoDB.Driver.Core.Misc.StreamExtensionMethods.ReadBytesAsync(Stream stream, Byte[] buffer, Int32 offset, Int32 count, CancellationToken cancellationToken)<br><br>at MongoDB.Driver.Core.Connections.BinaryConnection.ReceiveBufferAsync()<br><br>--- End of inner exception stack trace ---<br><br>at Conversations.Api.Controllers.ConversationsController.AnswerTranslation(Guid conversationGuid, Guid topicGuid, AnswerTopicRequest request, String audience, String language) in /app/Conversations.Api/Controllers/ConversationsController.cs:line 201<br><br>at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)<br><br>at System.Threading.Tasks.ValueTask`1.get\_Result()<br><br>at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()<br><br>at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()<br><br>at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)<br><br>at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)<br><br>at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()<br><br>at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()<br><br>at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)<br><br>at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)<br><br>at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()<br><br>at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()<br><br>at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)<br><br>at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)<br><br>at LiftOffLib.Utilities.Metrics.MetricsMiddleware.Invoke(HttpContext context)"<br> |
| 202069 Environment=beta Level=error Message="(5843972684569467) Error occured requesting: System.Net.Http.HttpRequestException: Response status code does not indicate success: 504 (GATEWAY\_TIMEOUT).<br> at Conversations.Api.Controllers.ConversationsController.AnswerTranslation(Guid conversationGuid, Guid topicGuid, AnswerTopicRequest request, String audience, String language) in /app/Conversations.Api/Controllers/ConversationsController.cs:line 201<br> at Microsoft.AspNetCore.Mvc.Internal.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)<br> at System.Threading.Tasks.ValueTask`1.get\_Result()<br> at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeActionMethodAsync()<br> at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeNextActionFilterAsync()<br> at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)<br> at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)<br> at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.InvokeInnerFilterAsync()<br> at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()<br> at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)<br> at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)<br> at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()<br> at Microsoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()<br> at Microsoft.AspNetCore.Routing.EndpointMiddleware.Invoke(HttpContext httpContext)<br> at Microsoft.AspNetCore.Routing.EndpointRoutingMiddleware.Invoke(HttpContext httpContext)<br> at LiftOffLib.Utilities.Metrics.MetricsMiddleware.Invoke(HttpContext context)"<br><br><br> |



